
<!DOCTYPE html><html lang="zh-CN">

<head>
  <meta charset="utf-8">
  <meta name="hexo-theme" content="https://github.com/xaoxuu/hexo-theme-stellar/tree/1.29.1" theme-name="Stellar" theme-version="1.29.1">
  
  <meta name="generator" content="Hexo 7.1.0">
  <meta http-equiv='x-dns-prefetch-control' content='on' />
  <link rel="preconnect" href="https://gcore.jsdelivr.net" crossorigin><link rel="preconnect" href="https://unpkg.com" crossorigin><link rel="preconnect" href="https://cdn.bootcdn.net" crossorigin>
  <meta name="renderer" content="webkit">
  <meta name="force-rendering" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
  <meta name="HandheldFriendly" content="True" >
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="theme-color" media="(prefers-color-scheme: dark)" content="#000">
  <meta name="theme-color" content="#f9fafb">
  
  <title>大模型发布时间轴 - ChongWen</title>

  
    <meta name="description" content="&#x2F;* 隐藏右侧栏 *&#x2F; .l_right {     display: none !important; }  .l_body {     display: grid !important;     grid-template-columns: auto 1fr !important; }  .l_center {     width: 100% !important;     max-widt">
<meta property="og:type" content="website">
<meta property="og:title" content="大模型发布时间轴">
<meta property="og:url" content="https://chongwenz.cn/llm-timeline/index.html">
<meta property="og:site_name" content="ChongWen">
<meta property="og:description" content="&#x2F;* 隐藏右侧栏 *&#x2F; .l_right {     display: none !important; }  .l_body {     display: grid !important;     grid-template-columns: auto 1fr !important; }  .l_center {     width: 100% !important;     max-widt">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2025-08-04T00:00:00.000Z">
<meta property="article:modified_time" content="2025-08-04T00:00:00.000Z">
<meta property="article:author" content="ChongWen">
<meta property="article:tag" content="AI">
<meta property="article:tag" content="大模型">
<meta property="article:tag" content="时间轴">
<meta name="twitter:card" content="summary">
  
  
  
  <meta name="keywords" content=",,">

  <!-- feed -->
  

  <link rel="stylesheet" href="/css/main.css?v=1.29.1">

  

  

  <meta name="baidu-site-verification" content="codeva-IdsBFUJOrH"><meta name="msvalidate.01" content="2DB9FDA68025BDEB7D4F1F9DB43E05FC" /><link rel="apple-touch-icon" sizes="180x180" href="/assets/xaoxuu/favicon/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/xaoxuu/favicon/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/xaoxuu/favicon/favicon-16x16.png"><link rel="manifest" href="/assets/xaoxuu/favicon/site.webmanifest"><link rel="shortcut icon" href="/assets/xaoxuu/favicon/favicon.ico"><meta name="theme-color" content="#f8f8f8"><link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/lxgw-wenkai-screen-webfont/1.7.0/style.min.css" media="all" />
</head>
<body>

<div class="l_body s:aa content tech" id="start" layout="page" ><aside class="l_left"><div class="leftbar-container">


<header class="header"><div class="logo-wrap"><div class="icon"><img no-lazy class="icon" src="/assets/img_config/logo.png" onerror="javascript:this.classList.add('error');this.src='https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/image/2659360.svg';"></div><a class="title" href="/"><div class="main" ff="title">chongwen</div><div class="sub normal cap">代码如诗，行行皆美</div><div class="sub hover cap" style="opacity:0"> 欢迎听到我的声音</div></a></div></header>

<div class="nav-area">
<div class="search-wrapper" id="search-wrapper"><form class="search-form"><a class="search-button" onclick="document.getElementById(&quot;search-input&quot;).focus();"><svg t="1705074644177" viewBox="0 0 1025 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1560" width="200" height="200"><path d="M1008.839137 935.96571L792.364903 719.491476a56.783488 56.783488 0 0 0-80.152866 0 358.53545 358.53545 0 1 1 100.857314-335.166073 362.840335 362.840335 0 0 1-3.689902 170.145468 51.248635 51.248635 0 1 0 99.217358 26.444296 462.057693 462.057693 0 1 0-158.255785 242.303546l185.930047 185.725053a51.248635 51.248635 0 0 0 72.568068 0 51.248635 51.248635 0 0 0 0-72.978056z" p-id="1561"></path><path d="M616.479587 615.969233a50.428657 50.428657 0 0 0-61.498362-5.534852 174.655348 174.655348 0 0 1-177.525271 3.484907 49.403684 49.403684 0 0 0-58.833433 6.76482l-3.074918 2.869923a49.403684 49.403684 0 0 0 8.609771 78.10292 277.767601 277.767601 0 0 0 286.992355-5.739847 49.403684 49.403684 0 0 0 8.404776-76.667958z" p-id="1562"></path></svg></a><input type="text" class="search-input" id="search-input" placeholder="站内搜索"></form><div id="search-result"></div><div class="search-no-result">没有找到内容！</div></div>


<nav class="menu dis-select"><a class="nav-item active" title="博客" href="/" style="color:#1BCDFC"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M5.879 2.879C5 3.757 5 5.172 5 8v8c0 2.828 0 4.243.879 5.121C6.757 22 8.172 22 11 22h2c2.828 0 4.243 0 5.121-.879C19 20.243 19 18.828 19 16V8c0-2.828 0-4.243-.879-5.121C17.243 2 15.828 2 13 2h-2c-2.828 0-4.243 0-5.121.879M8.25 17a.75.75 0 0 1 .75-.75h3a.75.75 0 0 1 0 1.5H9a.75.75 0 0 1-.75-.75M9 12.25a.75.75 0 0 0 0 1.5h6a.75.75 0 0 0 0-1.5zM8.25 9A.75.75 0 0 1 9 8.25h6a.75.75 0 0 1 0 1.5H9A.75.75 0 0 1 8.25 9" clip-rule="evenodd"/><path fill="currentColor" d="M5.235 4.058C5 4.941 5 6.177 5 8v8c0 1.823 0 3.058.235 3.942L5 19.924c-.975-.096-1.631-.313-2.121-.803C2 18.243 2 16.828 2 14v-4c0-2.829 0-4.243.879-5.121c.49-.49 1.146-.707 2.121-.803zm13.53 15.884C19 19.058 19 17.822 19 16V8c0-1.823 0-3.059-.235-3.942l.235.018c.975.096 1.631.313 2.121.803C22 5.757 22 7.17 22 9.999v4c0 2.83 0 4.243-.879 5.122c-.49.49-1.146.707-2.121.803z" opacity=".5"/></svg></a><a class="nav-item" title="专栏" href="/topic/" style="color:#3DC550"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M14.25 4.48v3.057c0 .111 0 .27.02.406a.936.936 0 0 0 .445.683a.96.96 0 0 0 .783.072c.13-.04.272-.108.378-.159L17 8.005l1.124.534c.106.05.248.119.378.16a.958.958 0 0 0 .783-.073a.936.936 0 0 0 .444-.683c.021-.136.021-.295.021-.406V3.031c.113-.005.224-.01.332-.013C21.154 2.98 22 3.86 22 4.933v11.21c0 1.112-.906 2.01-2.015 2.08c-.97.06-2.108.179-2.985.41c-1.082.286-1.99 1.068-3.373 1.436c-.626.167-1.324.257-1.627.323V5.174c.32-.079 1.382-.203 1.674-.371c.184-.107.377-.216.576-.323m5.478 8.338a.75.75 0 0 1-.546.91l-4 1a.75.75 0 0 1-.364-1.456l4-1a.75.75 0 0 1 .91.546" clip-rule="evenodd"/><path fill="currentColor" d="M18.25 3.151c-.62.073-1.23.18-1.75.336a8.2 8.2 0 0 0-.75.27v3.182l.75-.356l.008-.005a1.13 1.13 0 0 1 .492-.13c.047 0 .094.004.138.01c.175.029.315.1.354.12l.009.005l.749.356V3.647z"/><path fill="currentColor" d="M12 5.214c-.334-.064-1.057-.161-1.718-.339C8.938 4.515 8.05 3.765 7 3.487c-.887-.234-2.041-.352-3.018-.412C2.886 3.007 2 3.9 2 4.998v11.146c0 1.11.906 2.01 2.015 2.079c.97.06 2.108.179 2.985.41c.486.129 1.216.431 1.873.726c1.005.451 2.052.797 3.127 1.034z" opacity=".5"/><path fill="currentColor" d="M4.273 12.818a.75.75 0 0 1 .91-.545l4 1a.75.75 0 1 1-.365 1.455l-4-1a.75.75 0 0 1-.545-.91m.909-4.545a.75.75 0 1 0-.364 1.455l4 1a.75.75 0 0 0 .364-1.455z"/></svg></a><a class="nav-item" title="探索" href="/explore/" style="color:#FA6400"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="currentColor" d="M20 12a8 8 0 1 1-16 0a8 8 0 0 1 16 0" opacity=".5"/><path fill="currentColor" d="M17.712 5.453c1.047-.193 2.006-.259 2.797-.152c.77.103 1.536.393 1.956 1.064c.446.714.312 1.542-.012 2.258c-.33.728-.918 1.499-1.672 2.268c-1.516 1.547-3.836 3.226-6.597 4.697c-2.763 1.472-5.495 2.484-7.694 2.92c-1.095.217-2.098.299-2.923.201c-.8-.095-1.6-.383-2.032-1.075c-.47-.752-.296-1.63.07-2.379c.375-.768 1.032-1.586 1.872-2.403L4 12.416c0 .219.083.71.168 1.146c.045.23.09.444.123.596c-.652.666-1.098 1.263-1.339 1.756c-.277.567-.208.825-.145.925c.072.116.305.305.937.38c.609.073 1.44.018 2.455-.183c2.02-.4 4.613-1.351 7.28-2.772c2.667-1.42 4.85-3.015 6.23-4.423c.694-.707 1.15-1.334 1.377-1.836c.233-.515.167-.75.107-.844c-.07-.112-.289-.294-.883-.374c-.542-.072-1.272-.041-2.163.112L16.87 5.656c.338-.101.658-.17.842-.203"/></svg></a><a class="nav-item" title="社交" href="/friends/" style="color:#F44336"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="currentColor" d="m13.629 20.472l-.542.916c-.483.816-1.69.816-2.174 0l-.542-.916c-.42-.71-.63-1.066-.968-1.262c-.338-.197-.763-.204-1.613-.219c-1.256-.021-2.043-.098-2.703-.372a5 5 0 0 1-2.706-2.706C2 14.995 2 13.83 2 11.5v-1c0-3.273 0-4.91.737-6.112a5 5 0 0 1 1.65-1.651C5.59 2 7.228 2 10.5 2h3c3.273 0 4.91 0 6.113.737a5 5 0 0 1 1.65 1.65C22 5.59 22 7.228 22 10.5v1c0 2.33 0 3.495-.38 4.413a5 5 0 0 1-2.707 2.706c-.66.274-1.447.35-2.703.372c-.85.015-1.275.022-1.613.219c-.338.196-.548.551-.968 1.262" opacity=".5"/><path fill="currentColor" d="M10.99 14.308c-1.327-.978-3.49-2.84-3.49-4.593c0-2.677 2.475-3.677 4.5-1.609c2.025-2.068 4.5-1.068 4.5 1.609c0 1.752-2.163 3.615-3.49 4.593c-.454.335-.681.502-1.01.502c-.329 0-.556-.167-1.01-.502"/></svg></a></nav>
</div>
<div class="widgets"></div>

</div></aside><div class="l_main" id="main">





<div class="article banner top">
  <div class="content">
    <div class="top bread-nav footnote"><div class="left"><div class="flex-row" id="breadcrumb"><a class="cap breadcrumb" href="/">主页</a>

  <span class="sep"></span>
  <a class="cap breadcrumb" href="/llm-timeline/index.html">大模型发布时间轴</a>
  </div>
<div class="flex-row" id="post-meta"><span class="text created">发布于：<time datetime="2025-08-04T00:00:00.000Z">2025-08-04</time></span><span class="sep updated"></span><span class="text updated">更新于：<time datetime="2025-08-04T00:00:00.000Z">2025-08-04</time></span></div><div class="flex-row" id="page-words"><span style="padding: 4px;">本文：5.7k字</span><span class="sep updated" style="padding: 4px;"></span><span class="text updated" style="padding: 4px;">阅读时长：32分</span></div></div></div>
    
    <div class="bottom only-title">
      
      <div class="text-area">
        <h1 class="text title"><span>大模型发布时间轴</span></h1>
        
      </div>
    </div>
    
  </div>
  </div><article class="md-text content"><style>
/* 隐藏右侧栏 */
.l_right {
    display: none !important;
}

.l_body {
    display: grid !important;
    grid-template-columns: auto 1fr !important;
}

.l_center {
    width: 100% !important;
    max-width: none !important;
}

/* 顶部发布时间节点图样式 */
.release-chart-wrapper {
    max-width: 1400px;
    margin: 1.2rem auto 0.5rem auto;
    padding: 0 2rem;
}

.release-chart {
    width: 100%;
    height: 140px;
    background: linear-gradient(180deg, #fbfdff, #f6f8ff);
    border-radius: 12px;
    box-shadow: 0 2px 10px rgba(86,152,195,0.12);
    border: 1px solid rgba(86, 152, 195, 0.2);
    position: relative;
    overflow: hidden;
}

.release-chart svg {
    width: 100%;
    height: 100%;
    display: block;
}

.release-chart .tooltip {
    position: absolute;
    pointer-events: none;
    background: rgba(33, 39, 55, 0.95);
    color: #fff;
    font-size: 12px;
    padding: 6px 8px;
    border-radius: 6px;
    transform: translate(-50%, -120%);
    white-space: nowrap;
    z-index: 10;
    display: none;
}

/* 内层可横向扩展画布 */
.release-chart .rc-inner {
    position: absolute;
    left: 0;
    top: 0;
    height: 100%;
    will-change: transform;
}

/* 左右浅色移动按钮 */
.release-chart .pan-btn {
    position: absolute;
    top: 0;
    bottom: 0;
    width: 42px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #2f6bd8;
    font-weight: 700;
    font-size: 18px;
    border: none;
    background: transparent;
    cursor: pointer;
    z-index: 11;
    transition: opacity 0.2s ease;
}
.release-chart .pan-btn::before {
    content: '';
    position: absolute;
    top: 0; bottom: 0; left: 0; right: 0;
    background: linear-gradient(90deg, rgba(102,125,233,0.08), rgba(102,125,233,0));
    pointer-events: none;
}
.release-chart .pan-left { left: 0; }
.release-chart .pan-left::before { left: 0; right: auto; background: linear-gradient(90deg, rgba(102,125,233,0.12), rgba(102,125,233,0)); }
.release-chart .pan-right { right: 0; }
.release-chart .pan-right::before { left: auto; right: 0; background: linear-gradient(270deg, rgba(102,125,233,0.12), rgba(102,125,233,0)); }
.release-chart .pan-btn:hover { opacity: 0.95; }
.release-chart .pan-btn[disabled] { opacity: 0.35; cursor: default; }

/* 按钮的箭头字符 */
.release-chart .pan-btn span { position: relative; z-index: 1; }

/* 类型多选筛选 与 控制栏 */
.type-filter { display: flex; flex-wrap: wrap; gap: 8px; }
.type-chip { display: inline-block; padding: 4px 10px; border: 1px solid rgba(86,152,195,0.35); border-radius: 999px; cursor: pointer; font-size: 12px; color: #3c6a93; background: #f8fbff; user-select: none; }
.type-chip.selected { color: #fff; background: linear-gradient(135deg, #5698c3, #667eea); border-color: transparent; }

.control-bar { display: flex; align-items: center; gap: 10px; flex-wrap: wrap; margin-bottom: 8px; }
.control-bar .search-input { flex: 0 0 220px; max-width: 220px; height: 32px; padding: 0 10px; border: 1px solid rgba(86,152,195,0.35); border-radius: 8px; font-size: 14px; }
.control-bar .clear-btn { height: 32px; padding: 0 10px; border: 1px solid rgba(86,152,195,0.35); border-radius: 8px; background: linear-gradient(180deg,#fbfdff,#f6f8ff); cursor: pointer; color: #3c6a93; }
.control-bar .size-select { height: 32px; min-width: 140px; padding: 0 28px 0 10px; border: 1px solid rgba(86,152,195,0.35); border-radius: 8px; background-color: #fff; color: #365d7d; font-size: 13px; cursor: pointer; appearance: none; -webkit-appearance: none; -moz-appearance: none; background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 24 24' fill='none' stroke='%235698c3' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><polyline points='6 9 12 15 18 9'></polyline></svg>"); background-repeat: no-repeat; background-position: right 8px center; background-size: 12px; transition: border-color 0.2s ease, box-shadow 0.2s ease; }
.control-bar .size-select:hover { border-color: rgba(86,152,195,0.6); }
.control-bar .size-select:focus { outline: none; border-color: #5698c3; box-shadow: 0 0 0 3px rgba(86,152,195,0.18); }
.control-bar .size-select option { color: #2b4a63; }
.control-bar .type-filter { margin-left: 6px; }

/* 自定义下拉 */
.size-select-custom { position: relative; min-width: 160px; height: 32px; line-height: 32px; padding: 0 28px 0 10px; border: 1px solid rgba(86,152,195,0.35); border-radius: 8px; background: #fff; color: #365d7d; font-size: 13px; cursor: pointer; }
.size-select-custom::after { content: ''; position: absolute; right: 8px; top: 50%; transform: translateY(-50%); width: 12px; height: 12px; background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 24 24' fill='none' stroke='%235698c3' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><polyline points='6 9 12 15 18 9'></polyline></svg>"); background-size: 12px 12px; background-repeat: no-repeat; opacity: 0.85; }
.size-select-custom.open { border-color: #5698c3; box-shadow: 0 0 0 3px rgba(86,152,195,0.18); }
.size-dropdown { position: absolute; top: calc(100% + 6px); left: 0; right: 0; background: #fff; border: 1px solid rgba(86,152,195,0.35); border-radius: 8px; box-shadow: 0 6px 18px rgba(0,0,0,0.08); z-index: 20; padding: 4px; display: none; }
.size-dropdown.open { display: block; }
.size-option { padding: 0px 10px; border-radius: 6px; color: #2b4a63; font-size: 13px; }
.size-option:hover { background: #f1f6ff; }
.size-option.active { background: linear-gradient(135deg, #5698c3, #667eea); color: #fff; }
.size-option:not(:last-child) { margin-bottom: 4px; }

/* 自定义目录样式 */
.custom-toc {
    position: fixed;
    left: 20px;
    top: 200px;
    width: 250px;
    max-height: 500px;
    /* background: rgba(255, 255, 255, 0.95); */
    backdrop-filter: blur(10px);
    border-radius: 8px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    z-index: 1000;
    border: 1px solid rgba(255, 255, 255, 0.2);
    display: flex;
    flex-direction: column;
    overflow: hidden;
}

.custom-toc-header {
    flex-shrink: 0;
    padding: 1rem 1rem 0.5rem 1rem;
    background: transparent;
}

.custom-toc h3 {
    font-size: 1.1rem;
    font-weight: 600;
    color: #5698c3;
    margin: 0 0 0.5rem 0;
    padding-bottom: 0.3rem;
    border-bottom: 1px solid rgba(86, 152, 195, 0.3);
}

.custom-toc-content {
    flex: 1;
    overflow-y: auto;
    padding: 0 1rem 1rem 1rem;
    scrollbar-width: thin;
    scrollbar-color: rgba(86, 152, 195, 0.6) rgba(86, 152, 195, 0.1);
}

/* 自定义滚动条样式 - Webkit浏览器 */
.custom-toc-content::-webkit-scrollbar {
    width: 6px;
}

.custom-toc-content::-webkit-scrollbar-track {
    background: rgba(86, 152, 195, 0.1);
    border-radius: 3px;
    margin: 4px 0;
}

.custom-toc-content::-webkit-scrollbar-thumb {
    background: linear-gradient(180deg, #5698c3, #667eea);
    border-radius: 3px;
    transition: all 0.3s ease;
}

.custom-toc-content::-webkit-scrollbar-thumb:hover {
    background: linear-gradient(180deg, #667eea, #764ba2);
    transform: scaleX(1.2);
}

.custom-toc-content::-webkit-scrollbar-thumb:active {
    background: linear-gradient(180deg, #4a90e2, #5698c3);
}

.custom-toc ul {
    list-style: none;
    margin: 0;
    padding: 0;
}

.custom-toc li {
    margin-bottom: 0.3rem;
}

.custom-toc a {
    display: block;
    padding: 0.4rem 0.6rem;
    color: #666;
    text-decoration: none;
    border-radius: 8px;
    transition: all 0.3s ease;
    font-size: 0.95rem;
    line-height: 1.4;
}

.custom-toc a:hover {
    background: #f8f9fa;
    color: #5698c3;
    transform: translateX(3px);
}

.custom-toc a.active {
    background: linear-gradient(135deg, #5698c3, #667eea) !important;
    color: white !important;
    transform: translateX(3px) !important;
    font-size: 0.8rem !important;
    padding: 0.6rem 0.8rem !important;
}

/* 确保非活跃状态的样式重置 */
.custom-toc a:not(.active) {
    background: transparent !important;
    color: #666 !important;
    transform: translateX(0) !important;
    font-size: 0.8rem !important;
    padding: 0.4rem 0.6rem !important;
}

.custom-toc a:not(.active):hover {
    background: #f8f9fa !important;
    color: #5698c3 !important;
    transform: translateX(3px) !important;
}

/* 时间轴样式 */
.timeline-container {
    position: relative;
    max-width: 1400px;
    margin: 2rem auto;
    padding: 0 2rem;
}

/* 评价样式 */
.timeline-evaluation {
    background: linear-gradient(135deg, #f8f9ff, #f0f4ff);
    border-left: 4px solid #5698c3;
    padding: 1rem 1.2rem;
    margin: 1rem 0;
    border-radius: 8px;
    position: relative;
    box-shadow: 0 2px 4px rgba(86, 152, 195, 0.1);
}
.timeline-evaluation p {
    font-size:0.98rem;
    padding:0;
    margin:0;
}

.timeline-evaluation::before {
    position: absolute;
    top: 1rem;
    left: -12px; /* 将图标放在边框外侧 */
    font-size: 1.2rem;
    background: white;
    padding: 0.2rem;
    border-radius: 50%;
    box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    z-index: 1;
}

.timeline-evaluation-label {
    font-size: 1rem;
    font-weight: 600;
    color: #5698c3;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.timeline-evaluation-text {
    color: #4a5568;
    font-style: italic;
    line-height: 1.6;
    margin: 0;
    font-size: 0.95rem;
}

/* Markdown 内容样式 */
.timeline-text code,
.timeline-evaluation-text code {
    background: #f1f5f9;
    color: #e11d48;
    padding: 0.2rem 0.4rem;
    border-radius: 4px;
    font-size: 0.9em;
    font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
}

.timeline-text strong,
.timeline-evaluation-text strong {
    color: #1e293b;
    font-weight: 600;
}

.timeline-text em,
.timeline-evaluation-text em {
    color: #64748b;
    font-style: italic;
}

.timeline-text a,
.timeline-evaluation-text a {
    color: #5698c3;
    text-decoration: none;
    border-bottom: 1px solid rgba(86, 152, 195, 0.3);
    transition: all 0.3s ease;
}

.timeline-text a:hover,
.timeline-evaluation-text a:hover {
    color: #667eea;
    border-bottom-color: #667eea;
}

.timeline-container::before {
    content: '';
    position: absolute;
    left: 50%;
    top: 0;
    bottom: 0;
    width: 4px;
    background: linear-gradient(to bottom, #5698c3, #667eea);
    transform: translateX(-50%);
    border-radius: 2px;
}

.timeline-item {
    position: relative;
    margin-bottom: 4rem;
    width: 100%;
}

.timeline-item:nth-child(odd) .timeline-content {
    margin-left: 0;
    margin-right: calc(50% + 2rem);
    text-align: left;
}

.timeline-item:nth-child(even) .timeline-content {
    margin-left: calc(50% + 2rem);
    margin-right: 0;
    text-align: left;
}

.timeline-dot {
    position: absolute;
    left: 50%;
    top: 2rem;
    width: 20px;
    height: 20px;
    background: #5698c3;
    border: 4px solid white;
    border-radius: 50%;
    transform: translateX(-50%);
    z-index: 2;
    box-shadow: 0 0 0 4px rgba(86, 152, 195, 0.2);
}

.timeline-content {
    background: white;
    padding: 1.5rem;
    padding-left: 2rem;
    border-radius: 12px;
    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    transition: all 0.3s ease;
    position: relative;
}

.timeline-content:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 25px rgba(0,0,0,0.15);
}

.timeline-content::before {
    content: '';
    position: absolute;
    top: 2rem;
    width: 0;
    height: 0;
    border: 12px solid transparent;
}

.timeline-item:nth-child(odd) .timeline-content::before {
    right: -24px;
    border-left-color: white;
}

.timeline-item:nth-child(even) .timeline-content::before {
    left: -24px;
    border-right-color: white;
}

.timeline-date {
    display: block;
    /* color: #4f46e5; */
    color: #5698c3;
    font-size: 1.1rem;
    font-weight: 800;
    margin-bottom: 0.1rem;
    padding: 0;
    background: none;
}

.timeline-title {
    font-size: 1.3rem;
    font-weight: 700;
    color: #333;
    padding:0;
    margin:0;
    margin-bottom: 0.1rem;
    display: flex;
    align-items: center;
    gap: 8px;
}

.badge {
    display: inline-block;
    padding: 2px 8px;
    border-radius: 999px;
    font-size: 12px;
    font-weight: 700;
    letter-spacing: 0.5px;
    line-height: 1.6;
    border: 1px solid transparent;
}
.badge-open {
    color: #146c2e;
    background: #e8f5e9;
    border-color: #b7e0c2;
}
.badge-closed {
    color: #7a2e2e;
    background: #fff0f0;
    border-color: #f4c7c7;
}

.timeline-text-container {
    margin-bottom: 1rem;
}

.timeline-text {
    color: #666;
    margin-bottom: 0;
    line-height: 1.7;
    font-size: 1rem;
}

.timeline-details {
    background: #f8f9fa;
    padding: 0.5rem;
    padding-left:1rem;
    border-radius: 8px;
    margin-bottom: 1.1rem;
}

.timeline-details ul {
    list-style: none;
    margin: 0;
    padding: 0;
}

.timeline-details li {
    margin-bottom: 0.5rem;
    font-size: 0.8rem;
}

.timeline-details strong {
    color: #5698c3;
    font-weight: 600;
}

.timeline-link {
    display: inline-block;
    background: linear-gradient(135deg, #5698c3, #667eea);
    color: white;
    padding: 0.25rem 0.7rem;
    border-radius: 25px;
    text-decoration: none;
    font-weight: 600;
    transition: all 0.3s ease;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    margin:0;
    font-size:1rem;
}

.timeline-link:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    color: white;
    text-decoration: none;
}

.expand-btn {
    background: none;
    border: none;
    color: #5698c3;
    cursor: pointer;
    font-size: 0.9rem;
    text-decoration: underline;
    margin-top: 0.5rem;
    padding: 0;
}

.expand-btn:hover {
    color: #667eea;
}

.text-truncated {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
}

@media (max-width: 768px) {
    .custom-toc {
        display: none;
    }
    
    .release-chart-wrapper {
        padding: 0 1rem;
    }
    
    .timeline-container {
        padding: 0 1rem;
    }
    
    .timeline-container::before {
        left: 2rem;
    }
    
    .timeline-item:nth-child(odd) .timeline-content,
    .timeline-item:nth-child(even) .timeline-content {
        margin-left: 4rem;
        margin-right: 0;
        text-align: left;
    }
    
    .timeline-dot {
        left: 2rem;
    }
    
    .timeline-item:nth-child(odd) .timeline-content::before,
    .timeline-item:nth-child(even) .timeline-content::before {
        left: -24px;
        right: auto;
        border-left-color: transparent;
        border-right-color: white;
    }
}
</style>

<div class="release-chart-wrapper">
  <div class="control-bar">
    <input id="timeline-search" class="search-input" type="text" placeholder="搜索模型" />
    <div id="size-select-custom" class="size-select-custom" title="参数量"></div>
    <div class="type-filter" id="type-filter">
      <!-- 类型筛选芯片由JS生成 -->
    </div>
  </div>
  <div class="release-chart" id="release-chart">
    <div class="tooltip" id="release-chart-tooltip"></div>
  </div>
</div>

<div class="custom-toc" id="custom-toc">
    <div class="custom-toc-header">
        <h3>时间轴导航</h3>
    </div>
    <div class="custom-toc-content">
        <ul id="toc-list">
            <!-- 目录项将由 JavaScript 生成 -->
        </ul>
    </div>
</div>

<div class="timeline-container" id="timeline">
    <!-- 时间轴内容将由 JavaScript 生成 -->
</div>

<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
<script>
// 全局变量存储时间轴数据
let timelineData = [];
let allTimelineData = [];
let currentChartData = [];
let currentFilterQuery = '';
let currentSelectedTypes = new Set();
let currentSelectedSize = null; // { type: 'lte'|'gt', value: number } 或 null 表示不限

// 配置 marked.js
marked.setOptions({
    breaks: true,        // 支持换行
    gfm: true,          // 支持 GitHub Flavored Markdown
    sanitize: false,    // 允许 HTML（谨慎使用）
    smartLists: true,   // 智能列表
    smartypants: true   // 智能标点符号
});

// 从JSON文件加载时间轴数据
async function loadTimelineData() {
    try {
        const response = await fetch('./timeline-data.json');
        if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
        }
        timelineData = await response.json();
        timelineData = Array.isArray(timelineData) ? timelineData : [];
        allTimelineData = timelineData.map((d, i) => ({ ...d, __idx: i }));
        timelineData = allTimelineData;
        console.log('时间轴数据加载成功:', timelineData.length, '个项目');
        return timelineData;
    } catch (error) {
        console.error('加载时间轴数据失败:', error);
        // 如果加载失败，使用备用数据
        timelineData = [
            {
                "date": "2020-06",
                "title": "GPT-3 发布",
                "text": "GPT-3 是由 OpenAI 开发的大语言模型，拥有1750亿个参数。",
                "modelSize": "1750亿参数",
                "modelType": "自回归语言模型",
                "contextWindow": "4K",
                "officialDoc": "https://arxiv.org/abs/2005.14165"
            }
        ];
        allTimelineData = timelineData.map((d, i) => ({ ...d, __idx: i }));
        timelineData = allTimelineData;
        return timelineData;
    }
}

// 解析日期字符串，兼容 YYYY-MM 或 YYYY-MM-DD
function parseDateToMs(dateStr) {
    if (!dateStr) return NaN;
    const trimmed = String(dateStr).trim();
    // 如果只有年-月，补齐到当月第一天
    const normalized = /^\d{4}-\d{2}$/.test(trimmed) ? `${trimmed}-01` : trimmed;
    const ms = Date.parse(normalized);
    return isNaN(ms) ? NaN : ms;
}

// 使用轻量 SVG 渲染顶部发布时间节点图
function renderReleaseTimelineChart(data) {
    const container = document.getElementById('release-chart');
    if (!container) return;

    // 清空并创建结构：tooltip、可横向扩展的 inner、左右按钮
    container.innerHTML = '';
    const tooltip = document.createElement('div');
    tooltip.className = 'tooltip';
    tooltip.id = 'release-chart-tooltip';
    container.appendChild(tooltip);

    const inner = document.createElement('div');
    inner.className = 'rc-inner';
    container.appendChild(inner);

    const btnLeft = document.createElement('button');
    btnLeft.className = 'pan-btn pan-left';
    btnLeft.setAttribute('aria-label', '向左移动');
    btnLeft.innerHTML = '<span>‹</span>';
    const btnRight = document.createElement('button');
    btnRight.className = 'pan-btn pan-right';
    btnRight.setAttribute('aria-label', '向右移动');
    btnRight.innerHTML = '<span>›</span>';
    container.appendChild(btnLeft);
    container.appendChild(btnRight);

    // 视口尺寸
    const viewportW = container.clientWidth;
    const viewportH = container.clientHeight; // 140
    const margin = { left: 40, right: 6, top: 16, bottom: 28 };
    // 左右按钮护栏宽度，防止到边缘出现“空白”视觉（内容仍在按钮下方）
    const guard = 42; // 与按钮宽度一致
    const visibleWidth = Math.max(0, viewportW - guard * 2);
    const innerViewportW = Math.max(0, visibleWidth - margin.left - margin.right);
    const innerH = Math.max(0, viewportH - margin.top - margin.bottom);

    // 数据清洗与排序
    const items = (data || [])
      .map((d, idx) => ({ idx: (d && d.__idx != null ? d.__idx : idx), title: d.title || '', hasStar: (d.title || '').includes('⭐'), rawDate: d.date, t: parseDateToMs(d.date) }))
      .filter(d => !isNaN(d.t))
      .sort((a, b) => a.t - b.t);

    if (items.length === 0) {
        const empty = document.createElement('div');
        empty.style.cssText = 'position:absolute;inset:0;display:flex;align-items:center;justify-content:center;color:#8aa3c0;font-size:12px;';
        empty.textContent = '暂无可用的发布时间数据';
        container.appendChild(empty);
        return;
    }

    const minT = items[0].t;
    const maxT = items[items.length - 1].t;

    // 基于“有发布的月份”进行离散布局：仅包含有发布的月份
    const monthBucketsMap = new Map();
    items.forEach(d => {
        const dt = new Date(d.t);
        const y = dt.getFullYear();
        const m = dt.getMonth() + 1;
        const key = `${y}-${String(m).padStart(2, '0')}`;
        const monthStartMs = Date.UTC(y, m - 1, 1);
        if (!monthBucketsMap.has(key)) {
            monthBucketsMap.set(key, { key, monthStartMs, items: [] });
        }
        monthBucketsMap.get(key).items.push(d);
    });
    const months = Array.from(monthBucketsMap.values()).sort((a, b) => a.monthStartMs - b.monthStartMs);

    // 同日分组用于上下错开显示（避免同一时间的节点重叠）
    const dayKey = (t) => { const d = new Date(t); return Date.UTC(d.getUTCFullYear(), d.getUTCMonth(), d.getUTCDate()); };
    const dayGroups = new Map();
    items.forEach(it => {
        const k = dayKey(it.t);
        let arr = dayGroups.get(k);
        if (!arr) { arr = []; dayGroups.set(k, arr); }
        it.groupIndex = arr.length;
        arr.push(it);
    });
    dayGroups.forEach(arr => {
        const maxAbs = Math.ceil((arr.length - 1) / 2);
        arr.forEach(it => {
            const gi = it.groupIndex;
            const s = gi === 0 ? 0 : Math.ceil(gi / 2);
            const laneIdx = gi === 0 ? 0 : (gi % 2 === 1 ? s : -s);
            it.groupSize = arr.length;
            it.maxAbsLane = maxAbs;
            it.laneIndex = laneIdx;
        });
    });

    // 连续时间尺度：根据最小相邻时间差动态设置内容宽度
    const totalSpanMs = Math.max(1, maxT - minT);
    const innerBase = innerViewportW; // 基线宽度
    let minDeltaMs = Infinity;
    for (let i = 0; i < items.length - 1; i++) {
        const dt = items[i + 1].t - items[i].t;
        if (dt > 0 && dt < minDeltaMs) minDeltaMs = dt;
    }
    const desiredMinGap = 34;
    const maxScale = 12;
    let contentInnerW = innerBase;
    if (isFinite(minDeltaMs) && minDeltaMs > 0) {
        const candidate = Math.round((desiredMinGap * totalSpanMs) / minDeltaMs);
        contentInnerW = Math.max(innerBase, Math.min(innerBase * maxScale, candidate));
    }
    const endCap = 24; // 小幅缓冲
    const contentW = margin.left + margin.right + contentInnerW;
    inner.style.width = contentW + 'px';
    // 内容不超出可视区时居中
    if (contentW <= visibleWidth) {
        const leftPad = Math.max(0, Math.floor(guard + (visibleWidth - contentW) / 2));
        inner.style.left = leftPad + 'px';
    } else {
        inner.style.left = '0px';
    }

    // 生成刻度（连续时间）：根据跨度选择“按月”或“按日”步长
    const oneDay = 86400000;
    const spanDays = Math.max(1, Math.round(totalSpanMs / oneDay));
    const targetTicks = Math.min(10, Math.max(6, Math.floor(contentInnerW / 160)));
    let useMonthTicks = spanDays >= 120; // 超过 ~4 个月按月刻度
    let ticks = [];
    if (useMonthTicks) {
        const stepMonthsChoices = [1, 2, 3, 6, 12];
        const dMin = new Date(minT);
        const dMax = new Date(maxT);
        const start = new Date(Date.UTC(dMin.getUTCFullYear(), dMin.getUTCMonth(), 1));
        const end = new Date(Date.UTC(dMax.getUTCFullYear(), dMax.getUTCMonth(), 1));
        const monthsDiff = (end.getUTCFullYear() - start.getUTCFullYear()) * 12 + (end.getUTCMonth() - start.getUTCMonth());
        let bestStep = 1, bestDiff = Infinity;
        for (const s of stepMonthsChoices) {
            const cnt = Math.ceil(monthsDiff / s) + 1;
            const diff = Math.abs(cnt - targetTicks);
            if (diff < bestDiff) { bestDiff = diff; bestStep = s; }
        }
        let y = start.getUTCFullYear(); let m = start.getUTCMonth();
        while (true) {
            const t = Date.UTC(y, m, 1);
            if (t > maxT) break;
            ticks.push(t);
            m += bestStep; while (m >= 12) { y++; m -= 12; }
        }
    } else {
        const allowedDays = [1, 2, 3, 5, 7, 10, 14, 21, 30, 60];
        let bestStep = 7, bestDiff = Infinity;
        for (const s of allowedDays) {
            const cnt = Math.ceil(spanDays / s) + 1;
            const diff = Math.abs(cnt - targetTicks);
            if (diff < bestDiff) { bestDiff = diff; bestStep = s; }
        }
        const firstTick = Math.ceil(minT / oneDay) * oneDay;
        for (let t = firstTick; t <= maxT; t += bestStep * oneDay) ticks.push(t);
    }

    // 预计算索引映射，便于按日期求 x
    // 连续时间尺度的 X 映射（线性）：minT -> margin.left，maxT -> margin.left + contentInnerW
    function getXForDate(t) {
        if (maxT === minT) return margin.left + contentInnerW / 2;
        const clamped = Math.max(minT, Math.min(maxT, t));
        const ratio = (clamped - minT) / (maxT - minT);
        return margin.left + ratio * contentInnerW;
    }

    // 构建 SVG，宽度为可扩展内容宽度
    const svgNS = 'http://www.w3.org/2000/svg';
    const svg = document.createElementNS(svgNS, 'svg');
    svg.setAttribute('width', contentW);
    svg.setAttribute('height', viewportH);

    // 基线
    const baselineY = margin.top + innerH * 0.68; // 抬高基线，为上方多车道留更多空间
    const axis = document.createElementNS(svgNS, 'line');
    axis.setAttribute('x1', margin.left);
    axis.setAttribute('x2', margin.left + contentInnerW); // 轴线严格到内容末端，避免延伸到留白区域
    axis.setAttribute('y1', baselineY);
    axis.setAttribute('y2', baselineY);
    axis.setAttribute('stroke', 'rgba(86,152,195,0.45)');
    axis.setAttribute('stroke-width', '1');
    svg.appendChild(axis);

    // 尺度函数：线性时间尺度
    function scaleX(t) {
        return getXForDate(t);
    }

    // 刻度：基于连续时间的 ticks 数组渲染
    ticks.forEach((t, idx) => {
        const x = getXForDate(t);
        const tick = document.createElementNS(svgNS, 'line');
        tick.setAttribute('x1', x);
        tick.setAttribute('x2', x);
        tick.setAttribute('y1', baselineY - 8);
        tick.setAttribute('y2', baselineY + 8);
        tick.setAttribute('stroke', 'rgba(86,152,195,0.35)');
        tick.setAttribute('stroke-width', '1');
        svg.appendChild(tick);

        const label = document.createElementNS(svgNS, 'text');
        label.setAttribute('x', x);
        label.setAttribute('y', baselineY - 12);
        if (idx === 0) label.setAttribute('text-anchor', 'start');
        else if (idx === ticks.length - 1) label.setAttribute('text-anchor', 'end');
        else label.setAttribute('text-anchor', 'middle');
        label.setAttribute('font-size', '12');
        label.setAttribute('fill', '#3c6a93');
        const d = new Date(t);
        const y = d.getUTCFullYear();
        const mm = String(d.getUTCMonth() + 1).padStart(2, '0');
        if (spanDays >= 120) label.textContent = `${y}-${mm}`; else label.textContent = `${mm}-${String(d.getUTCDate()).padStart(2, '0')}`;
        svg.appendChild(label);
    });

    // 散点与 Tooltip
    const rng = (seed => () => (seed = (seed * 9301 + 49297) % 233280) / 233280)(123456);
    const laneGap = Math.max(10, Math.round(innerH * 0.18)); // 相邻“车道”的垂直间距
    const jitterAmp = Math.max(4, innerH * 0.15);

    items.forEach(d => {
        const x = getXForDate(d.t);
        const laneOffset = (d?.laneIndex || 0) * laneGap;
        const jitter = (rng() - 0.5) * 2 * jitterAmp;
        const y = baselineY - laneOffset - jitter * 0.25;
        let node;
        if (d.hasStar) {
            const star = document.createElementNS(svgNS, 'text');
            star.setAttribute('x', x);
            star.setAttribute('y', y);
            star.setAttribute('text-anchor', 'middle');
            star.setAttribute('dominant-baseline', 'middle');
            star.setAttribute('font-size', '12');
            star.textContent = '⭐';
            node = star;
        } else {
            const circle = document.createElementNS(svgNS, 'circle');
            circle.setAttribute('cx', x);
            circle.setAttribute('cy', y);
            circle.setAttribute('r', 4.5);
            circle.setAttribute('fill', '#2f6bd8');
            circle.setAttribute('opacity', '0.95');
            node = circle;
        }
        node.style.cursor = 'pointer';

        node.addEventListener('mouseenter', (e) => {
            tooltip.style.display = 'block';
            const rect = container.getBoundingClientRect();
            tooltip.style.left = `${e.clientX - rect.left}px`;
            tooltip.style.top = `${e.clientY - rect.top - 8}px`;
            const dt = new Date(d.t);
            const y = dt.getFullYear();
            const m = `${dt.getMonth() + 1}`.padStart(2, '0');
            const day = `${dt.getDate()}`.padStart(2, '0');
            tooltip.textContent = `${y}-${m}-${day} · ${d.title || '未命名'}`;
        });
        node.addEventListener('mousemove', (e) => {
            const rect = container.getBoundingClientRect();
            tooltip.style.left = `${e.clientX - rect.left}px`;
            tooltip.style.top = `${e.clientY - rect.top - 8}px`;
        });
        node.addEventListener('mouseleave', () => {
            tooltip.style.display = 'none';
        });
        node.addEventListener('click', () => {
            tooltip.style.display = 'none';
            const targetId = `timeline-item-${d.idx}`;
            if (typeof scrollToElement === 'function') {
                const el = document.getElementById(targetId);
                if (el) scrollToElement(targetId);
                else setTimeout(() => scrollToElement(targetId), 0);
            } else {
                const el = document.getElementById(targetId);
                el?.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }
        });

        svg.appendChild(node);
    });

    inner.appendChild(svg);

    // 平移控制
    let offset = 0; // 当前左移偏移
    // 为避免到最右仍显“空白”，允许最后一屏略微越界1px，改善视觉边缘
    const maxOffset = Math.max(0, contentW - visibleWidth); // 与动态 endCap 对齐

    function applyTransform() {
        inner.style.transform = `translateX(${-offset}px)`;
        // 按钮禁用状态
        if (maxOffset <= 0) {
            btnLeft.disabled = true; btnRight.disabled = true;
        } else {
            btnLeft.disabled = offset <= 0 + 1; // 容忍1px
            btnRight.disabled = offset >= maxOffset - 1;
        }
    }

    function panBy(dx) { offset = Math.max(0, Math.min(maxOffset, offset + dx)); applyTransform(); }

    // 点击/长按移动
    const clickStep = Math.max(120, Math.round(visibleWidth * 0.6));
    btnLeft.addEventListener('click', () => panBy(-clickStep));
    btnRight.addEventListener('click', () => panBy(clickStep));

    function hold(btn, dir) {
        let raf = 0; let running = false;
        const speed = Math.max(6, Math.round(visibleWidth / 200));
        const step = () => { panBy(dir * speed); raf = requestAnimationFrame(step); };
        const start = () => { if (running) return; running = true; raf = requestAnimationFrame(step); };
        const stop = () => { running = false; cancelAnimationFrame(raf); };
        btn.addEventListener('mousedown', start);
        btn.addEventListener('mouseup', stop);
        btn.addEventListener('mouseleave', stop);
        btn.addEventListener('touchstart', (e) => { e.preventDefault(); start(); }, { passive: false });
        btn.addEventListener('touchend', stop);
        btn.addEventListener('touchcancel', stop);
    }
    hold(btnLeft, -1);
    hold(btnRight, 1);

    // 支持滚轮/触控板左右移动
    container.addEventListener('wheel', (e) => {
        if (maxOffset <= 0) return; // 无可滚动内容则不拦截
        const delta = Math.abs(e.deltaX) > Math.abs(e.deltaY) ? e.deltaX : e.deltaY;
        if (delta !== 0) {
            e.preventDefault();
            panBy(delta);
        }
    }, { passive: false });
    
    // 初次渲染：如果内容超出可视区则展示最右侧，否则保持居中（不偏移）
    offset = contentW > visibleWidth ? maxOffset : 0;
    applyTransform();
}

// 使用 marked.js 解析 Markdown
function parseMarkdown(text) {
    if (!text) return '';
    
    // 使用 marked.js 解析 Markdown
    let html = marked.parse(text);
    
    // 确保链接在新窗口打开
    html = html.replace(/<a href/g, '<a target="_blank" href');
    
    return html;
}

function createTimelineItem(item, index) {
    const timelineItem = document.createElement('div');
    timelineItem.className = 'timeline-item';
    timelineItem.id = `timeline-item-${index}`;
    
    const isLongText = item.text && item.text.length > 250;
    const truncatedText = isLongText ? item.text.substring(0, 250) + '...' : item.text;
    
    // 解析 Markdown 格式
    const parsedText = parseMarkdown(item.text);
    const parsedTruncatedText = parseMarkdown(truncatedText);
    
    // 生成评价HTML（如果存在评价字段）
    const evaluationHTML = item.evaluation ? `
        <div class="timeline-evaluation">
            <div class="timeline-evaluation-label">评价</div>
            <div class="timeline-evaluation-text">${parseMarkdown(item.evaluation)}</div>
        </div>
    ` : '';
    
    // 生成模型详情列表，只显示非空字段
    const detailsItems = [];
    if (item.modelSize && item.modelSize.trim()) {
        detailsItems.push(`<li><strong>模型规模：</strong>${item.modelSize}</li>`);
    }
    if (item.modelType && item.modelType.trim()) {
        detailsItems.push(`<li><strong>模型类型：</strong>${item.modelType}</li>`);
    }
    if (item.contextWindow && item.contextWindow.trim()) {
        detailsItems.push(`<li><strong>上下文窗口：</strong>${item.contextWindow}</li>`);
    }
    
    // 只有当有详情项时才显示详情区域
    const detailsHTML = detailsItems.length > 0 ? `
        <div class="timeline-details">
            <ul>
                ${detailsItems.join('')}
            </ul>
        </div>
    ` : '';
    
    // 只有当有官方文档链接时才显示链接
    const officialLinkHTML = (item.officialDoc && item.officialDoc.trim()) ? 
        `<a href="${item.officialDoc}" target="_blank" class="timeline-link">官方文档</a>` : '';
    
    timelineItem.innerHTML = `
        <div class="timeline-dot"></div>
        <div class="timeline-content">
            <h3 class="timeline-title">${item.title}
                ${typeof item.openSource === 'boolean' ? `
                    <span class="badge ${item.openSource ? 'badge-open' : 'badge-closed'}" title="${item.openSource ? '开源' : '闭源'}">${item.openSource ? '开源' : '闭源'}</span>
                ` : ''}
            </h3>
            <div class="timeline-date">${item.date}</div>
            ${item.text ? `
                <div class="timeline-text-container">
                    <div class="timeline-text ${isLongText ? 'text-truncated' : ''}" id="text-${index}">
                        ${isLongText ? parsedTruncatedText : parsedText}
                    </div>
                    ${isLongText ? `<button class="expand-btn" onclick="toggleText(${index})">显示更多</button>` : ''}
                </div>
            ` : ''}
            ${evaluationHTML}
            ${detailsHTML}
            ${officialLinkHTML}
        </div>
    `;
    
    return timelineItem;
}

function createTocItem(item, index) {
    const tocItem = document.createElement('li');
    const displayOrder = (item && item.__displayIndex != null) ? item.__displayIndex : index;
    const realIndex = index;
    tocItem.innerHTML = `<a href="#timeline-item-${realIndex}" data-target="timeline-item-${realIndex}">${displayOrder + 1}. ${item.title}</a>`;
    return tocItem;
}

function scrollToElement(targetId) {
    const targetElement = document.getElementById(targetId);
    if (targetElement) {
        targetElement.scrollIntoView({
            behavior: 'smooth',
            block: 'center'
        });
        updateActiveTocItem(targetId);
    }
}

function updateActiveTocItem(activeId) {
    const tocLinks = document.querySelectorAll('.custom-toc a');
    let activeLink = null;
    
    tocLinks.forEach(link => {
        link.classList.remove('active');
        if (link.getAttribute('data-target') === activeId) {
            link.classList.add('active');
            activeLink = link;
        }
    });
    
    // 如果找到了激活的链接，让目录滚动到该位置
    if (activeLink) {
        scrollTocToActiveItem(activeLink);
    }
}

function scrollTocToActiveItem(activeLink) {
    const tocContent = document.querySelector('.custom-toc-content');
    if (!tocContent || !activeLink) return;
    
    const tocRect = tocContent.getBoundingClientRect();
    const linkRect = activeLink.getBoundingClientRect();
    
    // 计算链接相对于目录容器的位置
    const linkTop = activeLink.offsetTop;
    const linkHeight = activeLink.offsetHeight;
    const tocHeight = tocContent.clientHeight;
    const tocScrollTop = tocContent.scrollTop;
    
    // 计算目标滚动位置，让激活项显示在目录中间偏上的位置
    const targetScrollTop = linkTop - tocHeight / 3;
    
    // 检查是否需要滚动
    const linkVisibleTop = linkTop - tocScrollTop;
    const linkVisibleBottom = linkVisibleTop + linkHeight;
    
    // 如果链接不在可视区域内，或者接近边界，则滚动
    if (linkVisibleTop < 0 || linkVisibleBottom > tocHeight || linkVisibleTop < tocHeight / 4 || linkVisibleBottom > tocHeight * 3/4) {
        tocContent.scrollTo({
            top: Math.max(0, targetScrollTop),
            behavior: 'smooth'
        });
    }
}

function toggleText(index) {
    const textElement = document.getElementById(`text-${index}`);
    const button = textElement.nextElementSibling;
    const item = timelineData[index];
    
    if (textElement.classList.contains('text-truncated')) {
        textElement.innerHTML = parseMarkdown(item.text);
        textElement.classList.remove('text-truncated');
        button.textContent = '收起';
    } else {
        const truncatedText = item.text.substring(0, 250) + '...';
        textElement.innerHTML = parseMarkdown(truncatedText);
        textElement.classList.add('text-truncated');
        button.textContent = '显示更多';
    }
}

function handleScroll() {
    const timelineItems = document.querySelectorAll('.timeline-item');
    const scrollPosition = window.scrollY + window.innerHeight / 2;
    
    let activeItem = null;
    timelineItems.forEach(item => {
        const itemTop = item.offsetTop;
        const itemBottom = itemTop + item.offsetHeight;
        
        if (scrollPosition >= itemTop && scrollPosition <= itemBottom) {
            activeItem = item.id;
        }
    });
    
    if (activeItem) {
        updateActiveTocItem(activeItem);
    }
}

function clearTimelineAndToc() {
    const timelineContainer = document.getElementById('timeline');
    const tocList = document.getElementById('toc-list');
    if (timelineContainer) timelineContainer.innerHTML = '';
    if (tocList) tocList.innerHTML = '';
}

function renderTimelineAndToc(list) {
    const timelineContainer = document.getElementById('timeline');
    const tocList = document.getElementById('toc-list');
    if (!timelineContainer || !tocList) return;
    list.forEach((item, i) => {
        // 为目录编号使用 1..N 的显示序号
        try { item.__displayIndex = i; } catch (_) {}
        // 使用原始索引用于元素 id 与跳转
        const realIndex = (item && item.__idx != null) ? item.__idx : i;
        const timelineItem = createTimelineItem(item, realIndex);
        const tocItem = createTocItem(item, realIndex);
        timelineContainer.appendChild(timelineItem);
        tocList.appendChild(tocItem);
    });
    document.querySelectorAll('.custom-toc a').forEach(link => {
        link.addEventListener('click', function(e) {
            e.preventDefault();
            const targetId = this.getAttribute('data-target');
            scrollToElement(targetId);
        });
    });
}

const TYPE_OPTIONS = [
    { key: 'lang', label: '语言', match: ['语言', '语言模型', '文本', 'LLM', 'language'] },
    { key: 'multi', label: '多模态', match: ['多模态', 'multimodal', '视频+图像+文本'] },
    { key: 'img', label: '图像', match: ['图像生成', '文生图', 'image'] },
    { key: 'video', label: '视频', match: ['视频生成', '文生视频', 'video'] },
    { key: 'code', label: '代码', match: ['代码', 'code', '编程'] },
    { key: 'code', label: '语音', match: ['语音生成'] },
    { key: 'doc', label: '文档解析', match: ['文档', 'OCR', 'doc', '文档解析', '文档解析模型'] },
    { key: 'other', label: '其他', match: [] }
];

function renderTypeChips() {
    const wrap = document.getElementById('type-filter');
    if (!wrap) return;
    wrap.innerHTML = '';
    TYPE_OPTIONS.forEach(opt => {
        const span = document.createElement('span');
        span.className = 'type-chip';
        span.textContent = opt.label;
        span.dataset.key = opt.key;
        span.addEventListener('click', () => {
            const k = span.dataset.key;
            if (currentSelectedTypes.has(k)) {
                currentSelectedTypes.delete(k);
                span.classList.remove('selected');
            } else {
                currentSelectedTypes.add(k);
                span.classList.add('selected');
            }
            applyFilters();
        });
        wrap.appendChild(span);
    });
}

function normalizeStr(s) {
    return (s || '').toLowerCase();
}

function itemMatchesTypes(item) {
    if (currentSelectedTypes.size === 0) return true; // 未选择类型，则不过滤
    const mt = normalizeStr(item.modelType || '');
    let belongs = false;

    // 是否命中已知类别
    for (const opt of TYPE_OPTIONS) {
        if (!currentSelectedTypes.has(opt.key)) continue;
        if (opt.key === 'other') continue; // "其他"后面单独处理
        if (opt.match.some(kw => mt.includes(normalizeStr(kw)))) {
            belongs = true;
            break;
        }
    }

    // 处理“其他”
    if (!belongs && currentSelectedTypes.has('other')) {
        const isKnown = TYPE_OPTIONS.some(opt => opt.key !== 'other' && opt.match.some(kw => mt.includes(normalizeStr(kw))));
        if (!isKnown || mt.trim() === '') return true;
    }

    return belongs;
}

const SIZE_OPTIONS = [
    { label: '≤3B', type: 'lte', value: 3 },
    { label: '≤7B', type: 'lte', value: 7 },
    { label: '≤32B', type: 'lte', value: 32 },
    { label: '≤72B', type: 'lte', value: 72 },
    { label: '≤120B', type: 'lte', value: 120 },
    { label: '≤400B', type: 'lte', value: 400 },
    { label: '>400B', type: 'gt', value: 400 }
];

// 移除旧的尺寸芯片容器渲染，改为下拉渲染
function renderSizeSelect() {
    const host = document.getElementById('size-select-custom');
    if (!host) return;
    host.innerHTML = '';
    const label = document.createElement('div');
    label.textContent = currentSelectedSize ? SIZE_OPTIONS.find(o => o.type === currentSelectedSize.type && o.value === currentSelectedSize.value)?.label || '参数量（全部）' : '参数量（全部）';
    host.appendChild(label);
    const drop = document.createElement('div');
    drop.className = 'size-dropdown';
    SIZE_OPTIONS.forEach(opt => {
        const optDom = document.createElement('div');
        optDom.className = 'size-option' + (currentSelectedSize && currentSelectedSize.type === opt.type && currentSelectedSize.value === opt.value ? ' active' : '');
        optDom.textContent = opt.label;
        optDom.addEventListener('click', (e) => {
            e.stopPropagation();
            // 先关闭下拉，避免重渲染期间事件状态异常
            closeDrop();
            if (currentSelectedSize && currentSelectedSize.type === opt.type && currentSelectedSize.value === opt.value) {
                currentSelectedSize = null;
            } else {
                currentSelectedSize = { type: opt.type, value: opt.value };
            }
            applyFilters();
            // 重渲染选择器，更新标签文本与选中态
            renderSizeSelect();
        });
        drop.appendChild(optDom);
    });
    host.appendChild(drop);

    let onDocClick = null;
    function closeDrop() {
        host.classList.remove('open');
        drop.classList.remove('open');
        if (onDocClick) { document.removeEventListener('click', onDocClick, true); onDocClick = null; }
    }
    const toggle = (e) => {
        e.stopPropagation();
        const willOpen = !host.classList.contains('open');
        if (willOpen) {
            host.classList.add('open');
            drop.classList.add('open');
            onDocClick = (evt) => { if (!host.contains(evt.target)) closeDrop(); };
            document.addEventListener('click', onDocClick, true);
        } else {
            closeDrop();
        }
    };
    host.onclick = null; host.onkeydown = null;
    host.onclick = toggle;
    host.setAttribute('role', 'button');
    host.setAttribute('tabindex', '0');
    host.onkeydown = (e) => { if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); toggle(e); } };
}

function parseModelSizesToBList(modelSize) {
    // 提取如 "0.5B, 1.8B, 4B, 7B" 或 "120B (..), 20B (..)" 的前置主尺寸
    // 规则：取逗号分隔的前段，每段取第一个 "(数字(小数)?B)"，单位统一为B（十进制），忽略括号中的总计/激活信息
    if (!modelSize || typeof modelSize !== 'string') return [];
    const head = modelSize.split('(')[0]; // 只看括号前
    const parts = head.split(',');
    const result = [];
    const re = /([0-9]+(?:\.[0-9]+)?)\s*B/i;
    parts.forEach(p => {
        const m = p.match(re);
        if (m) {
            const v = parseFloat(m[1]);
            if (!isNaN(v)) result.push(v);
        }
    });
    return result;
}

function itemMatchesSize(item) {
    if (currentSelectedSize == null) return true;
    const sizes = parseModelSizesToBList(item.modelSize || '');
    if (sizes.length === 0) return false; // 无法解析则不匹配
    // 区间规则：
    // lte 档采用“上一个 lte 值, 当前值]（左开右闭）”，如 ≤7B => (3B, 7B]
    // 第一档 ≤3B 为 (-∞, 3B]
    // gt 档为 (value, +∞)
    if (currentSelectedSize.type === 'lte') {
        const idx = SIZE_OPTIONS.findIndex(o => o.type === 'lte' && o.value === currentSelectedSize.value);
        let lower = -Infinity;
        if (idx > 0) {
            for (let i = idx - 1; i >= 0; i--) {
                if (SIZE_OPTIONS[i].type === 'lte') { lower = SIZE_OPTIONS[i].value; break; }
            }
        }
        if (!isFinite(lower)) {
            return sizes.some(v => v <= currentSelectedSize.value);
        }
        return sizes.some(v => v > lower && v <= currentSelectedSize.value);
    } else if (currentSelectedSize.type === 'gt') {
        return sizes.some(v => v > currentSelectedSize.value);
    }
    return true;
}

// 修改 applyFilters 将尺寸条件纳入
function applyFilters() {
    const q = normalizeStr(currentFilterQuery);
    const filtered = allTimelineData.filter(d => {
        const titleOk = !q || normalizeStr(d.title).includes(q);
        const typeOk = itemMatchesTypes(d);
        const sizeOk = itemMatchesSize(d);
        return titleOk && typeOk && sizeOk;
    });
    currentChartData = filtered;
    renderReleaseTimelineChart(currentChartData);
    clearTimelineAndToc();
    renderTimelineAndToc(filtered);
    if (filtered.length > 0) {
        setTimeout(() => updateActiveTocItem(`timeline-item-${(filtered[0].__idx != null ? filtered[0].__idx : 0)}`), 200);
    }
}

function filterAndRenderByTitle(query) {
    currentFilterQuery = query;
    applyFilters();
}

// 修复博客主题的运行时间脚本错误
window.runtime_span = window.runtime_span || { innerHTML: '' };

// 初始化页面
async function initTimeline() {
    try {
        // 加载时间轴数据
        await loadTimelineData();

        // 顶部发布时间节点图
        currentChartData = timelineData;
        renderReleaseTimelineChart(currentChartData);
        // 监听窗口尺寸变化重绘
        let resizeTimer = null;
        window.addEventListener('resize', () => {
            clearTimeout(resizeTimer);
            resizeTimer = setTimeout(() => renderReleaseTimelineChart(currentChartData), 150);
        });
        
        // 渲染时间轴与目录（初次）
        clearTimelineAndToc();
        renderTimelineAndToc(timelineData);

        // 渲染类型与尺寸筛选芯片
        renderTypeChips();
        renderSizeSelect();
        
        // 搜索框交互
        const input = document.getElementById('timeline-search');
        if (input) {
            input.value = currentFilterQuery || '';
            input.addEventListener('input', () => filterAndRenderByTitle(input.value));
            input.addEventListener('keydown', (e) => { if (e.key === 'Escape') { input.value=''; filterAndRenderByTitle(''); } });
        }
        
        const timelineContainer = document.getElementById('timeline');
        const tocList = document.getElementById('toc-list');
        
        if (!timelineContainer || !tocList) {
            console.warn('时间轴元素未找到');
            return;
        }
        
        // 添加滚动监听
        window.addEventListener('scroll', handleScroll);
        
        // 初始化第一个项目为活跃状态
        setTimeout(() => {
            updateActiveTocItem('timeline-item-0');
        }, 500);
        
        console.log('时间轴初始化成功');
        
    } catch (error) {
        console.error('时间轴初始化失败:', error);
    }
}

// 页面加载完成后初始化
document.addEventListener('DOMContentLoaded', function() {
    initTimeline();
});
</script></article>

  <div class="related-wrap md-text" id="comments">
    <section class='header cmt-title cap theme'>
      <p>快来参与讨论吧~</p>

    </section>
    <section class='body cmt-body giscus'>
      

<svg class="loading" style="vertical-align:middle;fill:currentColor;overflow:hidden;" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2709"><path d="M832 512c0-176-144-320-320-320V128c211.2 0 384 172.8 384 384h-64zM192 512c0 176 144 320 320 320v64C300.8 896 128 723.2 128 512h64z" p-id="2710"></path></svg>

<div id="giscus" src="https://giscus.app/client.js" data-repo="momomo623/LifeNotes" data-repo-id="R_kgDON54egw" data-category="Announcements" data-category-id="DIC_kwDON54eg84Cm_Na" data-mapping="pathname" data-strict="0" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="top" data-theme="preferred_color_scheme" data-lang="zh-CN" data-loading="lazy" crossorigin="anonymous"></div>

    </section>
  </div>



<footer class="page-footer footnote"><hr><div class="text"><center>
</br>
</br>
<script type="text/javascript">
function show_runtime() {
   window.setTimeout("show_runtime()", 1000);
   X = new Date("2/15/2025 00:00:00 ");
   Y = new Date();
   T = (Y.getTime() - X.getTime());
   M = 24 * 60 * 60 * 1000;
   a = T / M;
   A = Math.floor(a);
   b = (a - A) * 24;
   B = Math.floor(b);
   c = (b - B) * 60;
   C = Math.floor((b - B) * 60);
   D = Math.floor((c - C) * 60);
   runtime_span.innerHTML = "<span style='font-size: 1rem'>✨ 本站已运行 " + A + " 天 " + B + " 小时 " + C + " 分 " + D + " 秒 ✨</span>"
}
show_runtime();
</script>
<span id="runtime_span"> </span>
</center>
<center style='font-size: 1rem;margin-top: 0.2rem;'><span id="busuanzi_container_site_pv">总访问<span id="busuanzi_value_site_pv"></span>次</span></center>
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<div style="font-size: 1rem;text-align: center; margin: 0.2rem 0; ">发表了 24 篇文章 🔸 总计 59.9k 字</div></div></footer>
<div class="main-mask" onclick="sidebar.dismiss()"></div></div><aside class="l_right">
</aside><div class='float-panel blur'>
  <button type='button' style='display:none' class='laptop-only rightbar-toggle mobile' onclick='sidebar.rightbar()'>
    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6h11m-11 6h11m-11 6h11M4 6h1v4m-1 0h2m0 8H4c0-1 2-2 2-3s-1-1.5-2-1"/></svg>
  </button>
  <button type='button' style='display:none' class='mobile-only leftbar-toggle mobile' onclick='sidebar.leftbar()'>
    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-width="1.5"><path d="M2 11c0-3.771 0-5.657 1.172-6.828C4.343 3 6.229 3 10 3h4c3.771 0 5.657 0 6.828 1.172C22 5.343 22 7.229 22 11v2c0 3.771 0 5.657-1.172 6.828C19.657 21 17.771 21 14 21h-4c-3.771 0-5.657 0-6.828-1.172C2 18.657 2 16.771 2 13z"/><path id="sep" stroke-linecap="round" d="M5.5 10h6m-5 4h4m4.5 7V3"/></g></svg>
  </button>
</div>
</div><div class="scripts">
<script type="text/javascript">
  const ctx = {
    date_suffix: {
      just: `刚刚`,
      min: `分钟前`,
      hour: `小时前`,
      day: `天前`,
    },
    root : `/`,
  };

  // required plugins (only load if needs)
  if (`local_search`) {
    ctx.search = {};
    ctx.search.service = `local_search`;
    if (ctx.search.service == 'local_search') {
      let service_obj = Object.assign({}, `{"field":"all","path":"/search.json","content":true,"sort":"-date"}`);
      ctx.search[ctx.search.service] = service_obj;
    }
  }
  const def = {
    avatar: `https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/avatar/round/3442075.svg`,
    cover: `https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/cover/76b86c0226ffd.svg`,
  };
  const deps = {
    jquery: `https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.min.js`,
    marked: `https://cdn.jsdelivr.net/npm/marked@13.0.1/lib/marked.umd.min.js`
  }
  

</script>

<script type="text/javascript">
  const utils = {
    // 懒加载 css https://github.com/filamentgroup/loadCSS
    css: (href, before, media, attributes) => {
      var doc = window.document;
      var ss = doc.createElement("link");
      var ref;
      if (before) {
        ref = before;
      } else {
        var refs = (doc.body || doc.getElementsByTagName("head")[0]).childNodes;
        ref = refs[refs.length - 1];
      }
      var sheets = doc.styleSheets;
      if (attributes) {
        for (var attributeName in attributes) {
          if (attributes.hasOwnProperty(attributeName)) {
            ss.setAttribute(attributeName, attributes[attributeName]);
          }
        }
      }
      ss.rel = "stylesheet";
      ss.href = href;
      ss.media = "only x";
      function ready(cb) {
        if (doc.body) {
          return cb();
        }
        setTimeout(function () {
          ready(cb);
        });
      }
      ready(function () {
        ref.parentNode.insertBefore(ss, before ? ref : ref.nextSibling);
      });
      var onloadcssdefined = function (cb) {
        var resolvedHref = ss.href;
        var i = sheets.length;
        while (i--) {
          if (sheets[i].href === resolvedHref) {
            return cb();
          }
        }
        setTimeout(function () {
          onloadcssdefined(cb);
        });
      };
      function loadCB() {
        if (ss.addEventListener) {
          ss.removeEventListener("load", loadCB);
        }
        ss.media = media || "all";
      }
      if (ss.addEventListener) {
        ss.addEventListener("load", loadCB);
      }
      ss.onloadcssdefined = onloadcssdefined;
      onloadcssdefined(loadCB);
      return ss;
    },

    js: (src, opt) => new Promise((resolve, reject) => {
      var script = document.createElement('script');
      if (src.startsWith('/')){
        src = ctx.root + src.substring(1);
      }
      script.src = src;
      if (opt) {
        for (let key of Object.keys(opt)) {
          script[key] = opt[key]
        }
      } else {
        // 默认异步，如果需要同步，第二个参数传入 {} 即可
        script.async = true
      }
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    }),

    jq: (fn) => {
      if (typeof jQuery === 'undefined') {
        utils.js(deps.jquery).then(fn)
      } else {
        fn()
      }
    },
    
    onLoading: (el) => {
      if (el) {
        $(el).append('<div class="loading-wrap"><svg xmlns="http://www.w3.org/2000/svg" width="2em" height="2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-width="2"><path stroke-dasharray="60" stroke-dashoffset="60" stroke-opacity=".3" d="M12 3C16.9706 3 21 7.02944 21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3Z"><animate fill="freeze" attributeName="stroke-dashoffset" dur="1.3s" values="60;0"/></path><path stroke-dasharray="15" stroke-dashoffset="15" d="M12 3C16.9706 3 21 7.02944 21 12"><animate fill="freeze" attributeName="stroke-dashoffset" dur="0.3s" values="15;0"/><animateTransform attributeName="transform" dur="1.5s" repeatCount="indefinite" type="rotate" values="0 12 12;360 12 12"/></path></g></svg></div>');
      }
    },
    onLoadSuccess: (el) => {
      if (el) {
        $(el).find('.loading-wrap').remove();
      }
    },
    onLoadFailure: (el) => {
      if (el) {
        $(el).find('.loading-wrap svg').remove();
        $(el).find('.loading-wrap').append('<svg xmlns="http://www.w3.org/2000/svg" width="2em" height="2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path stroke-dasharray="60" stroke-dashoffset="60" d="M12 3L21 20H3L12 3Z"><animate fill="freeze" attributeName="stroke-dashoffset" dur="0.5s" values="60;0"/></path><path stroke-dasharray="6" stroke-dashoffset="6" d="M12 10V14"><animate fill="freeze" attributeName="stroke-dashoffset" begin="0.6s" dur="0.2s" values="6;0"/></path></g><circle cx="12" cy="17" r="1" fill="currentColor" fill-opacity="0"><animate fill="freeze" attributeName="fill-opacity" begin="0.8s" dur="0.4s" values="0;1"/></circle></svg>');
        $(el).find('.loading-wrap').addClass('error');
      }
    },
    request: (el, url, callback, onFailure) => {
      let retryTimes = 3;
      utils.onLoading(el);
      function req() {
        return new Promise((resolve, reject) => {
          let status = 0; // 0 等待 1 完成 2 超时
          let timer = setTimeout(() => {
            if (status === 0) {
              status = 2;
              timer = null;
              reject('请求超时');
              if (retryTimes == 0) {
                onFailure();
              }
            }
          }, 5000);
          fetch(url).then(function(response) {
            if (status !== 2) {
              clearTimeout(timer);
              resolve(response);
              timer = null;
              status = 1;
            }
            if (response.ok) {
              return response.json();
            }
            throw new Error('Network response was not ok.');
          }).then(function(data) {
            retryTimes = 0;
            utils.onLoadSuccess(el);
            callback(data);
          }).catch(function(error) {
            if (retryTimes > 0) {
              retryTimes -= 1;
              setTimeout(() => {
                req();
              }, 5000);
            } else {
              utils.onLoadFailure(el);
              onFailure();
            }
          });
        });
      }
      req();
    },
  };
</script>

<script>
  const sidebar = {
    leftbar: () => {
      if (l_body) {
        l_body.toggleAttribute('leftbar');
        l_body.removeAttribute('rightbar');
      }
    },
    rightbar: () => {
      if (l_body) {
        l_body.toggleAttribute('rightbar');
        l_body.removeAttribute('leftbar');
      }
    },
    dismiss: () => {
      if (l_body) {
        l_body.removeAttribute('leftbar');
        l_body.removeAttribute('rightbar');
      }
    },
    toggleTOC: () => {
      document.querySelector('#data-toc').classList.toggle('collapse');
    }
  }
</script>
<script type="text/javascript">
  (() => {
    const tagSwitchers = document.querySelectorAll('.tag-subtree.parent-tag > a > .tag-switcher-wrapper')
    for (const tagSwitcher of tagSwitchers) {
      tagSwitcher.addEventListener('click', (e) => {
        const parent = e.target.closest('.tag-subtree.parent-tag')
        parent.classList.toggle('expanded')
        e.preventDefault()
      })
    }

    // Get active tag from query string, then activate it.
    const urlParams = new URLSearchParams(window.location.search)
    const activeTag = urlParams.get('tag')
    if (activeTag) {
      let tag = document.querySelector(`.tag-subtree[data-tag="${activeTag}"]`)
      if (tag) {
        tag.querySelector('a').classList.add('active')
        
        while (tag) {
          tag.classList.add('expanded')
          tag = tag.parentElement.closest('.tag-subtree.parent-tag')
        }
      }
    }
  })()
</script>


<!-- required -->
<script src="/js/main.js?v=1.29.1" defer></script>

<script type="text/javascript">
  const applyTheme = (theme) => {
    if (theme === 'auto') {
      document.documentElement.removeAttribute('data-theme')
    } else {
      document.documentElement.setAttribute('data-theme', theme)
    }

    applyThemeToGiscus(theme)
  }

  const applyThemeToGiscus = (theme) => {
    theme = theme === 'auto' ? 'preferred_color_scheme' : theme

    const cmt = document.getElementById('giscus')
    if (cmt) {
      // This works before giscus load.
      cmt.setAttribute('data-theme', theme)
    }

    const iframe = document.querySelector('#comments > section.giscus > iframe')
    if (iframe) {
      // This works after giscus loaded.
      const src = iframe.src
      const newSrc = src.replace(/theme=[\w]+/, `theme=${theme}`)
      iframe.src = newSrc
    }
  }

  const switchTheme = () => {
    // light -> dark -> auto -> light -> ...
    const currentTheme = document.documentElement.getAttribute('data-theme')
    let newTheme;
    switch (currentTheme) {
      case 'light':
        newTheme = 'dark'
        break
      case 'dark':
        newTheme = 'auto'
        break
      default:
        newTheme = 'light'
    }
    applyTheme(newTheme)
    window.localStorage.setItem('Stellar.theme', newTheme)

    const messages = {
      light: `切换到浅色模式`,
      dark: `切换到深色模式`,
      auto: `切换到跟随系统配色`,
    }
    hud?.toast?.(messages[newTheme])
  }

  (() => {
    // Apply user's preferred theme, if any.
    const theme = window.localStorage.getItem('Stellar.theme')
    if (theme !== null) {
      applyTheme(theme)
    }
  })()
</script>


<!-- optional -->

  <script type="module">
  const el = document.querySelector('#comments #giscus');
  util.viewportLazyload(el, load_discus, true);

  function load_discus() {
    if (!el) return;
    try {
        el.innerHTML = '';
      } catch (error) {
        console.error(error);
      }
      const script = document.createElement('script');
      script.async = true;
      for (const key of Object.keys(el.attributes)) {
        const attr = el.attributes[key];
        if (['class', 'id'].includes(attr.name) === false) {
          script.setAttribute(attr.name, attr.value);
        }
      }
      el.appendChild(script);
  }
</script>




<script defer>
  window.addEventListener('DOMContentLoaded', (event) => {
    ctx.services = Object.assign({}, JSON.parse(`{"mdrender":{"js":"/js/services/mdrender.js"},"siteinfo":{"js":"/js/services/siteinfo.js","api":null},"ghinfo":{"js":"/js/services/ghinfo.js"},"sites":{"js":"/js/services/sites.js"},"friends":{"js":"/js/services/friends.js"},"timeline":{"js":"/js/services/timeline.js"},"fcircle":{"js":"/js/services/fcircle.js"},"weibo":{"js":"/js/services/weibo.js"},"memos":{"js":"/js/services/memos.js"}}`));
    for (let id of Object.keys(ctx.services)) {
      const js = ctx.services[id].js;
      if (id == 'siteinfo') {
        ctx.cardlinks = document.querySelectorAll('a.link-card[cardlink]');
        if (ctx.cardlinks?.length > 0) {
          utils.js(js, { defer: true }).then(function () {
            setCardLink(ctx.cardlinks);
          });
        }
      } else {
        const els = document.getElementsByClassName(`ds-${id}`);
        if (els?.length > 0) {
          utils.jq(() => {
            if (id == 'timeline' || 'memos' || 'marked') {
              utils.js(deps.marked).then(function () {
                utils.js(js, { defer: true });
              });
            } else {
              utils.js(js, { defer: true });
            }
          });
        }
      }
    }
  });
</script>

<script>
  window.addEventListener('DOMContentLoaded', (event) => {
    ctx.search = {
      path: `/search.json`,
    }
    utils.js('/js/search/local-search.js', { defer: true });
  });
</script><script>
  window.FPConfig = {
    delay: 0,
    ignoreKeywords: [],
    maxRPS: 5,
    hoverDelay: 25
  };
</script>
<script defer src="https://cdn.jsdelivr.net/npm/flying-pages@2/flying-pages.min.js"></script><script defer src="https://cdn.jsdelivr.net/npm/vanilla-lazyload@19.1.3/dist/lazyload.min.js"></script>
<script>
  // https://www.npmjs.com/package/vanilla-lazyload
  // Set the options globally
  // to make LazyLoad self-initialize
  window.lazyLoadOptions = {
    elements_selector: ".lazy",
  };
  // Listen to the initialization event
  // and get the instance of LazyLoad
  window.addEventListener(
    "LazyLoad::Initialized",
    function (event) {
      window.lazyLoadInstance = event.detail.instance;
    },
    false
  );
  document.addEventListener('DOMContentLoaded', function () {
    window.lazyLoadInstance?.update();
  });
</script><script>
  ctx.fancybox = {
    selector: `.timenode p>img`,
    css: `https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0/dist/fancybox/fancybox.css`,
    js: `https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0/dist/fancybox/fancybox.umd.js`
  };
  var selector = '[data-fancybox]:not(.error)';
  if (ctx.fancybox.selector) {
    selector += `, ${ctx.fancybox.selector}`
  }
  var needFancybox = document.querySelectorAll(selector).length !== 0;
  if (!needFancybox) {
    const els = document.getElementsByClassName('ds-memos');
    if (els != undefined && els.length > 0) {
      needFancybox = true;
    }
  }
  if (needFancybox) {
    utils.css(ctx.fancybox.css);
    utils.js(ctx.fancybox.js, { defer: true }).then(function () {
      Fancybox.bind(selector, {
        hideScrollbar: false,
        Thumbs: {
          autoStart: false,
        },
        caption: (fancybox, slide) => {
          return slide.triggerEl.alt || slide.triggerEl.dataset.caption || null
        }
      });
    })
  }
</script>
<script>
  window.addEventListener('DOMContentLoaded', (event) => {
    const swiper_api = document.getElementById('swiper-api');
    if (swiper_api != undefined) {
      utils.css(`https://unpkg.com/swiper@10.3.1/swiper-bundle.min.css`);
      utils.js(`https://unpkg.com/swiper@10.3.1/swiper-bundle.min.js`, { defer: true }).then(function () {
        const effect = swiper_api.getAttribute('effect') || '';
        var swiper = new Swiper('.swiper#swiper-api', {
          slidesPerView: 'auto',
          spaceBetween: 8,
          centeredSlides: true,
          effect: effect,
          rewind: true,
          pagination: {
            el: '.swiper-pagination',
            clickable: true,
          },
          navigation: {
            nextEl: '.swiper-button-next',
            prevEl: '.swiper-button-prev',
          },
        });
      })
    }
  });
</script>
<script>
  document.addEventListener('DOMContentLoaded', function () {
    window.codeElements = document.querySelectorAll('.code');
    if (window.codeElements.length > 0) {
      ctx.copycode = {
        default_text: `Copy`,
        success_text: `Copied`,
        toast: `复制成功`,
      };
      utils.js('/js/plugins/copycode.js');
    }
  });
</script>


<!-- inject -->
<script type="text/javascript" src="/js/custom.js?1"></script><script src="/js/custom.js?1"></script>

<script>
    var _hmt = _hmt || [];
    (function() {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?24f04947aeb2f3270094b862a85ee670";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
    })();
</script>

</div></body></html>
